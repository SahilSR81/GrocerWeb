<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Your Order History</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{title}}</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playpen+Sans:wght@100..800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="{% static 'css/style.css' %}">

  <style>

.modal-content {
  background: linear-gradient(to right, #ff7e5f, #de2817); /* Gradient background */
  border-radius: 20px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  padding: 30px;
  color: #fff;
}

/* Modal Header Styling */
.modal-header {
  border: none;
  padding-bottom: 20px;
  text-align: center;
}

.modal-title {
  font-size: 1.5rem;
  font-weight: 600;
  letter-spacing: 0.5px;
}

/* Close Button Style */
.btn-close {
  background-color: transparent;
  border: none;
  font-size: 1.5rem;
  color: #fff;
  transition: transform 0.2s ease-in-out;
}

.btn-close:hover {
  transform: rotate(90deg);
}

/* Search Input Styling */
.search-input {
  font-size: 1.1rem;
  border-radius: 50px;
  border-right: 50px;
  padding-left: 50px;
  border: none;
  background-color: #fff;
  color: #333;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease-in-out;
}

.search-input:focus {
  outline: none;
  border-color: #feb47b;
  box-shadow: 0 0 8px rgba(255, 126, 95, 0.5);
}

/* Search Icon Button Styling */
.btn-gradient {
  background: linear-gradient(to right, #ff7e5f, #eb1405); /* Gradient */
  color: white;
  border-radius: 50%;
  padding: 10px;
  border: none;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  transition: all 0.3s ease;
}

.btn-gradient i {
  font-size: 1.5rem;
}

.btn-gradient:hover {
  background: linear-gradient(to right, #e61111, #ff7e5f); /* Reverse gradient on hover */
  transform: translateY(-5px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
}

.input-group {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
}

/* Hover Animation for Search Input */
.search-input:focus, .btn-gradient:focus {
  outline: none;
  box-shadow: 0 0 10px rgba(255, 126, 95, 0.6);
}

/* Responsive Design */
@media (max-width: 767px) {
  .modal-content {
    padding: 20px;
    font-size: 1rem;
  }

  .modal-title {
    font-size: 1.2rem;
  }

  .search-input {
    font-size: 1rem;
    padding-left: 15px;
  }

  .btn-gradient {
    font-size: 1rem;
    padding: 8px 20px;
  }

  /* Adjusting the input-group */
  .input-group {
    flex-direction: column;
    align-items: center;
  }

  /* Adjusting modal size on smaller screens */
  .modal-dialog {
    max-width: 100%;
    margin: 0;
  }
}

@media (max-width: 576px) {
  .modal-content {
    padding: 15px;
  }

  .modal-title {
    font-size: 1.1rem;
  }

  .search-input {
    font-size: 0.9rem;
  }

  .btn-gradient {
    font-size: 0.9rem;
    padding: 8px 15px;
  }
}
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #fdfcfa;
      
    }

    h2 {
      font-weight: 600;
      margin-bottom: 40px;
      text-align: center;
      color: #b30000;
    }

    .order-card {
      border: none;
      border-radius: 12px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.1);
      margin-bottom: 30px;
      overflow: hidden;
      transition: all 0.3s ease-in-out;
    }

    .order-header {
      background-color: #2f673e;
      color: white;
      padding: 15px 20px;
      font-size: 16px;
      font-weight: 600;
      border-radius: 12px 12px 0 0;
      cursor: pointer;
    }

    .status-badge {
      font-size: 0.8rem;
      padding: 5px 12px;
      border-radius: 20px;
    }

    .status-Delivered { background-color: #28a745; color: white; }
    .status-Pending { background-color: #ffc107; color: #212529; }
    .status-Cancelled { background-color: #dc3545; color: white; }
    .status-Shipped { background-color: #0dcaf0; color: #212529; }

    .product img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 10px;
      margin-right: 15px;
    }

    .product h6 {
      margin: 0;
      font-weight: 600;
    }

    .product p {
      margin: 2px 0 0;
      font-size: 14px;
      color: #555;
    }

    .shop-btn {
      display: inline-block;
      background-color: #28a745;
      color: white;
      padding: 12px 30px;
      border-radius: 30px;
      text-decoration: none;
      transition: background 0.3s;
      margin-top: 20px;
    }

    .shop-btn:hover {
      background-color: #218838;
    }

    .action-btn {
      font-size: 14px;
      padding: 6px 15px;
      border-radius: 25px;
      margin-top: 10px;
      cursor: pointer;
      transition: 0.3s;
    }

    .custom-modal {
      border-radius: 20px;
      border: none;
      box-shadow: 0 0 25px rgba(0, 0, 0, 0.15);
    }

    .action-btn.track {
      background-color: #28a745;
      color: white;
    }

    .action-btn.track:hover {
      background-color: #218838;
    }

    .action-btn.cancel {
      background-color: #35dc62;
      color: white;
    }

    .action-btn.cancel:hover {
      background-color: #c82333;
    }

    .action-btn.invoice {
      background-color: #b30000;
      color: white;
    }

    .action-btn.invoice:hover {
      background-color: #800000;
    }

    .card-body {
      background-color: #fffefc;
    }

    .modal-body i {
      font-size: 40px;
      margin-bottom: 10px;
    }

    .alert {
      border-radius: 10px;
    }
  </style>
</head>


<body>
    <header>
        <nav class="navbar sticky-top navbar-expand-lg navbar-light">
          <div class="container-fluid">
            <!-- Search container that triggers the modal -->
            <div class="search-container">
              <!-- Icon for triggering the search modal -->
              <i class="fa fa-search" data-bs-toggle="modal" data-bs-target="#searchModal"></i>
              <!-- Search input field for smaller screens -->
              <form action="{% url 'search_products' %}" method="GET" class="w-100">
                <input type="text" name="query" placeholder="Search..." class="search-input">
              </form>
            </div>
      
            <ul></ul>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
      
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <a class="nav-link nav-links" href="{% url 'home' %}">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link nav-links" href="{% url 'shop' %}">Shop</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link nav-links" href="{% url 'about' %}">About</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link nav-links" href="{% url 'contact' %}">Contact</a>
                </li>
              </ul>
              <div class="icon">
                {% if 'cust_id' in request.session %}
                <div class="dropdown">
                  <button style="border: 0; background-color: #ef1616d3; color:#0cb381 ;" type="button"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    Hello<i class="fa-solid fa-user ii"></i>
                  </button>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="{% url 'profile' %}">My Account</a></li>
                    <li><a class="dropdown-item" href="{% url 'order_history' %}">Order History</a></li>
                    <li><a class="dropdown-item" href="{% url 'logout' %}">Log-Out</a></li>
                  </ul>
                </div>
                {% else %}
                <a class="ii" href="{% url 'login' %}"><i class="fa-solid fa-user"></i></a>
                {% endif %}
                <a class="ii" href="{% url 'wishlist' %}"><i class="fa-solid fa-heart"></i></a>
                <a class="ii" href="{% url 'cart_list' %}"><i class="fa-solid fa-cart-shopping"></i></a>
                <span class="badge badge-info">{{ total_items }}</span>
              </div>
            </div>
          </div>
        </nav>
      
        <!-- Search Modal -->
  <!-- Search Modal -->
  <div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content shadow-lg">
        <div class="modal-header">
          <h5 class="modal-title" id="searchModalLabel"><i class="fa fa-search"></i> Find Your Products</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Search Form -->
          <form action="{% url 'search_products' %}" method="GET">
            <div class="input-group mb-3">
              <input type="text" name="query" class="form-control search-input" placeholder="What are you looking for?" required>
              <!-- Search Icon Button -->
              <button type="submit" class="btn btn-gradient">
                <i class="fa fa-search"></i>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
      
  
          </div>
        </div>
        </div>
      </nav>
      </div> 
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <a class="nav-link nav-links" href="{% url 'home' %}">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link nav-links" href="{% url 'shop' %}">Shop</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link nav-links" href="{% url 'about' %}">About</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link nav-links" href="{% url 'contact' %}">Contact</a>
                </li>
              </ul>
              <div class="icon">
                {% if 'cust_id' in request.session %}
                <div class="dropdown">
                  <button style="border: 0; background-color: #ef1616d3; color:#0cb381 ;" type="button"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    Hello<i class="fa-solid fa-user ii"></i>
                  </button>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="{% url 'profile' %}">My Account</a></li>
                    <li><a class="nav-link" href="{% url 'order_history' %}">Order History</a></li>
                    <li><a class="dropdown-item" href="{% url 'logout' %}">Log-Out</a></li>
                  </ul>
                </div>
                {% else %}
                <a class="ii" href="{% url 'login' %}"><i class="fa-solid fa-user"></i></a>
                {% endif %}
                <a class="ii" href="{% url 'wishlist' %}"><i class="fa-solid fa-heart"></i></a>
                <a class="ii" href="{% url 'cart_list' %}"><i class="fa-solid fa-cart-shopping"></i></a>
                <span class="badge badge-info">{{ total_items }}</span>
              </div>
            </div>
          </div>
        </nav>
      
        <!-- Search Modal -->
        <!-- Search Modal -->
  <div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content shadow-lg">
        <div class="modal-header">
          <h5 class="modal-title" id="searchModalLabel"><i class="fa fa-search"></i> Find Your Products</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Search Form -->
          <form action="{% url 'search_products' %}" method="GET">
            <div class="input-group mb-3">
              <input type="text" name="query" class="form-control search-input" placeholder="What are you looking for?" required>
              <button type="submit" class="btn btn-gradient">
                <i class="fa fa-search"></i> Search
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  
          </div>
        </div>
        </div>
      </nav>
      </div>
      <!-- </div> -->
      </nav>
  
    
  
  
  
    </header>
    


<div class="container">
  

  <!-- Flash Messages -->
  {% if messages %}
    <div class="mt-3">
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
          <i class="fa-solid fa-circle-info me-2"></i>{{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    </div>
  {% endif %}
  
  <div class="text-center">
    <a href="#"  style="text-decoration: none;"  class="shop-btn"><i class="fa-solid fa-box-archive me-1"></i>Order history</a>
  </div>
  <!-- <div class="text-center">
    <h2><i class="fa-solid fa-box-archive me-1"></i>Order History</h2>
  </div> -->

  {% if orders %}
    <div class="accordion" id="orderAccordion">
      {% for order in orders %}
        <div class="card order-card">
          <div class="card-header order-header" data-bs-toggle="collapse" data-bs-target="#order{{ order.id }}">
            <i class="fa-solid fa-receipt me-2"></i>Order #{{ order.id }} -
            <span class="badge status-{{ order.status }} ms-2">{{ order.status }}</span>
          </div>
          <div id="order{{ order.id }}" class="collapse {% if forloop.first %}show{% endif %}" data-bs-parent="#orderAccordion">
            <div class="card-body">
              <p><strong>Date:</strong> {{ order.created_at|date:"M d, Y" }}</p>
              <p><strong>Total:</strong> ₹{{ order.total_amount }}</p>
              <p><strong>Payment:</strong> Cash on Delivery</p>
              <p><strong>Address:</strong> {{ order.address }}</p>
              <hr>
              {% for item in order.items.all %}
                <div class="d-flex align-items-center product mb-3">
                  <img src="{{ item.get_product_image }}" alt="Product">
                  <div>
                    <h6>{{ item.get_product_name }}</h6>
                    <p>Qty: {{ item.quantity }} × ₹{{ item.price }}</p>
                  </div>
                </div>
              {% endfor %}
              <div class="d-flex justify-content-between flex-wrap gap-2">
                <a href="{% url 'track_order' order.id %}" class="btn action-btn track">
                  <i class="fa-solid fa-location-dot me-1"></i>Track Order
                </a>

                {% if order.status == "Pending" %}
                  <button type="button" class="btn action-btn cancel" data-bs-toggle="modal" data-bs-target="#cancelModal{{ order.id }}">
                    <i class="fa-solid fa-xmark-circle me-1"></i>Cancel
                  </button>

                  <!-- Cancel Modal -->
                  <div class="modal fade" id="cancelModal{{ order.id }}" tabindex="-1" aria-labelledby="cancelModalLabel{{ order.id }}" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                      <div class="modal-content custom-modal">
                        <div class="modal-header">
                          <h5 class="modal-title" id="cancelModalLabel{{ order.id }}">Cancel Order?</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body text-center">
                          <i class="fa-solid fa-triangle-exclamation text-danger"></i>
                          <p>Are you sure you want to cancel <strong>Order #{{ order.id }}</strong>? This action cannot be undone.</p>
                        </div>
                        <div class="modal-footer justify-content-center">
                          <button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal">No</button>
                          <a href="{% url 'cancel_order' order.id %}" class="btn btn-danger px-4">Yes, Cancel</a>
                        </div>
                      </div>
                    </div>
                  </div>
                {% endif %}
                <a href="{% url 'download_invoice' order.id %}" class="btn action-btn invoice">
                  <i class="fa-solid fa-file-invoice me-1"></i>Invoice
                </a>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-center text-muted">You have not placed any orders yet.</p>
  {% endif %}

  <div class="text-center">
    <a href="{% url 'shop' %}" class="shop-btn"><i class="fa-solid fa-cart-plus me-2"></i>Continue Shopping</a>
  </div>
</div>
<footer>
    <div class="container-fluid text-white-50 footer pt-5 mt-5">
      <div class="container py-5">
        <div class="pb-4 mb-4" style="border-bottom: 1px solid rgba(226, 175, 24, 0.5) ;">
          <div class="row g-4">
            <div class="col-lg-3">
              <a href="#">
                <h1 class="text-success mb-0">Grocer</h1>
                <p class="text-secondary mb-0">Fresh products</p>
              </a>
            </div>
            <div class="col-lg-6">
              <!-- <div class="position-relative mx-auto">
                              <input class="form-control border-0 w-100 py-3 px-4 rounded-pill" type="number" placeholder="Your Email">
                              <button type="submit" class="btn btn-primary border-0 border-secondary py-3 px-4 position-absolute rounded-pill text-white" style="top: 0; right: 0;">Subscribe Now</button>
                          </div> -->
            </div>
            <div class="col-lg-3">
              <div class="d-flex justify-content-end pt-3">
                <a class="btn  btn-outline-secondary me-2 btn-md-square rounded-circle" href="https://x.com/?lang=en"><i
                    class="fab fa-twitter"></i></a>
                <a class="btn btn-outline-secondary me-2 btn-md-square rounded-circle" href="https://www.facebook.com/"><i
                    class="fab fa-facebook-f"></i></a>
                <a class="btn btn-outline-secondary me-2 btn-md-square rounded-circle" href="https://www.youtube.com/"><i
                    class="fab fa-youtube"></i></a>
                <a class="btn btn-outline-secondary btn-md-square rounded-circle" href="https://in.linkedin.com/"><i
                    class="fab fa-linkedin-in"></i></a>
              </div>
            </div>
          </div>
        </div>
        <div class="row g-5">
          <div class="col-lg-3 col-md-6">
            <div class="footer-item">
              <h4 class="text-light mb-3">Why People Like us!</h4>
              <p class="mb-4">Welcome to Grocer, your trusted online grocery store dedicated to bringing convenience, quality, and freshness right to your doorstep.</p>
              <a href="{% url 'about' %}" class="btn border-secondary py-2 px-4 rounded-pill text-success">Read More</a>
            </div>
          </div>
          <div class="col-lg-3 col-md-6">
            <div class="d-flex flex-column text-start footer-item">
              <h4 class="text-light mb-3">Shop Info</h4>
              <a class="btn-link" href="{% url 'about' %}">About Us</a>
              <a class="btn-link" href="{% url 'contact' %}">Contact Us</a>
              <a class="btn-link" href="">Privacy Policy</a>
              <a class="btn-link" href="">Terms & Condition</a>
              <a class="btn-link" href="">Return Policy</a>
              <a class="btn-link" href="">FAQs & Help</a>
            </div>
          </div>
          <div class="col-lg-3 col-md-6">
            <div class="d-flex flex-column text-start footer-item">
              <h4 class="text-light mb-3">Account</h4>
              <a class="btn-link" href="{% url 'profile' %}">My Account</a>
              <a class="btn-link" href="">Shop details</a>
              <a class="btn-link" href="{% url 'cart_list' %}">Shopping Cart</a>
              <a class="btn-link" href="">Wishlist</a>
              <!-- <a class="btn-link" href="">Order History</a>
              <a class="btn-link" href="">International Orders</a> -->
            </div>
          </div>
          <div class="col-lg-3 col-md-6">
            <div class="footer-item">
              <h4 class="text-light mb-3">Contact</h4>
              <p>Address: Mera Ghar</p>
              <p>Email: Example@gmail.com</p>
              <p>Phone: +91-098677447</p>
              <p>Payment Accepted</p>
              <img src="img/payment.png" class="img-fluid" alt="">
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Footer End -->




  </footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
  setTimeout(() => {
    document.querySelectorAll('.alert').forEach(el => el.remove());
  }, 3000);
</script>
</body>
</html>